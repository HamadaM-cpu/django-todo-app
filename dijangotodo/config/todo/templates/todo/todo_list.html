{% extends 'todo/base.html' %}

{% block header %}
<h1>ğŸŒ¸ ä»Šæ—¥ã®ã‚„ã‚‹ã“ã¨ãƒªã‚¹ãƒˆ ğŸŒ¸</h1>

<form method="GET" action="{% url 'list' %}">
    <input type="text" name="search" placeholder="Search tasks" value="{{ request.GET.search }}">
    <button type="submit" class="btn btn-outline-secondary btn-sm">æ¤œç´¢</button>
</form>

{% if request.GET.search %}
    <p>ã€Œ<strong>{{ request.GET.search }}</strong>ã€ã®æ¤œç´¢çµæœï¼š{{ tasks|length }} ä»¶</p>
{% endif %}

<p><a href="{% url 'create' %}" class="btn btn-pink">ï¼‹ æ–°è¦ä½œæˆ</a></p>
{% endblock header %}

{% block content %}
<div class="shadow-sm p-3 mb-5 bg-white rounded">

    {% if tasks %}
    <table class="table">
        <thead>
            <tr>
                <th scope="col">ã‚¿ã‚¤ãƒˆãƒ«</th>
                <th scope="col">ç· åˆ‡æ—¥</th>
                <th scope="col">å®Œäº†</th>
                <th scope="col">æ“ä½œ</th>
            </tr>
        </thead>
        <tbody>
            {% for task in tasks %}
            <tr class="task-item{% if task.completed %} completed-task{% endif %}">
                <td>{{ task.title }}</td>
                <td>{{ task.deadline }}</td>
                <td>
                    <a href="{% url 'toggle' task.pk %}" 
                       class="btn {% if task.completed %}btn-success{% else %}btn-primary{% endif %} btn-sm">
                        {% if task.completed %}æœªå®Œäº†{% else %}å®Œäº†{% endif %}
                    </a>
                </td>
                <td>
                    <a href="{% url 'detail' task.pk %}" class="btn btn-info btn-sm">è©³ç´°</a>
                    <a href="{% url 'update' task.pk %}" class="btn btn-warning btn-sm">ç·¨é›†</a>
                    <a href="{% url 'delete' task.pk %}" class="btn btn-danger btn-sm">å‰Šé™¤</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p class="text-center mt-4" style="color: #888;">ã‚¿ã‚¹ã‚¯ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ ğŸƒ<br>ã€Œï¼‹ æ–°è¦ä½œæˆã€ãƒœã‚¿ãƒ³ã‹ã‚‰è¿½åŠ ã§ãã¾ã™ï¼</p>
    {% endif %}
</div>
{% endblock content %}
